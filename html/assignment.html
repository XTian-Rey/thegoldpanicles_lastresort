<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Staff Assignment Overview</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/assignment.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container">
            <a class="navbar-brand fw-bold" href="/html/dashboard.html"> < Dashboard </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <!-- Assignment Overview Section -->
    <div class="table-container">
        <div class="btn-group">
            <button class="btn btn-primary" style="background-color: #f5c52b; color: black" onclick="navigate(-1)">&lt; Previous</button>
            <span id="month-year">2024 November</span>
            <button class="btn btn-primary" style="background-color: #f5c52b; color: black" onclick="navigate(1)">Next &gt;</button>
        </div>

        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>Staffer</th>
                    <th>Date</th>
                    <th>Assigned Task</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody id="assignment-list">
                <!-- Dynamic rows will be added here -->
            </tbody>
        </table>
    </div>

    <script>
        const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
        let currentDate = new Date(2024, 10); // November 2024

        const holidays = ["2024-11-01", "2024-11-25"]; // Example holidays
        const staffers = ["John Doe", "Jane Smith", "Alice Brown", "Bob White"];
        const taskStatuses = ["Completed", "In Progress", "Pending"];
        const tasks = [
            "Project Meeting", 
            "System Update", 
            "Client Call", 
            "Documentation Review", 
            "Team Training", 
            "Budget Review"
        ];

        function isHoliday(date) {
            return holidays.includes(date.toISOString().split('T')[0]);
        }

        function getWeekdaysInMonth(year, month) {
            const date = new Date(year, month, 1);
            const weekdays = [];
            while (date.getMonth() === month) {
                if (date.getDay() !== 0 && date.getDay() !== 6 && !isHoliday(date)) {
                    weekdays.push(new Date(date));
                }
                date.setDate(date.getDate() + 1);
            }
            return weekdays;
        }

        function renderAssignments() {
            const assignmentList = document.getElementById('assignment-list');
            assignmentList.innerHTML = '';

            const weekdays = getWeekdaysInMonth(currentDate.getFullYear(), currentDate.getMonth());

            weekdays.forEach((day, index) => {
                const row = document.createElement('tr');

                const stafferCell = document.createElement('td');
                stafferCell.textContent = staffers[index % staffers.length]; // Rotate staffers
                row.appendChild(stafferCell);

                const dateCell = document.createElement('td');
                dateCell.textContent = `${monthNames[day.getMonth()]} ${day.getDate()}, ${day.getFullYear()}`;
                row.appendChild(dateCell);

                const taskCell = document.createElement('td');
                taskCell.textContent = tasks[index % tasks.length]; // Rotate tasks
                row.appendChild(taskCell);

                const statusCell = document.createElement('td');
                statusCell.textContent = taskStatuses[Math.floor(Math.random() * taskStatuses.length)]; // Randomize status
                row.appendChild(statusCell);

                assignmentList.appendChild(row);
            });
        }

        function navigate(direction) {
            currentDate.setMonth(currentDate.getMonth() + direction);
            document.getElementById('month-year').textContent = `${monthNames[currentDate.getMonth()]} ${currentDate.getFullYear()}`;
            renderAssignments();
        }

        // Initialize
        renderAssignments();
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
